name: CLA Assistant
on:
  issue_comment:
    types: [created]
  pull_request_target:
    types: [opened, closed, synchronize]

permissions:
  actions: write
  contents: write
  pull-requests: write
  statuses: write

jobs:
  cla-check:
    runs-on: ubuntu-latest
    steps:
      - name: CLA Assistant
        if: (github.event.comment.body == 'recheck' || github.event.comment.body == 'I have read the CLA Document and I hereby sign the CLA') || github.event_name == 'pull_request_target'
        uses: contributor-assistant/github-action@v2.4.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PERSONAL_ACCESS_TOKEN: ${{ secrets.CLA_ASSISTANT_PAT }}
        with:
          path-to-signatures: 'signatures/cla.json'
          path-to-document: 'https://github.com/cortexlinux/cortex/blob/main/CLA.md'
          branch: 'main'
          allowlist: 'bot*,dependabot*,github-actions*'

          custom-notsigned-prcomment: |
            ## Contributor License Agreement Required

            Thank you for your contribution to **Cortex Linux**!

            Before we can merge this PR, we need you to sign our [Contributor License Agreement](https://github.com/cortexlinux/cortex/blob/main/CLA.md).

            ### How to Sign (takes 10 seconds)

            Reply to this comment with exactly:
            ```
            I have read the CLA Document and I hereby sign the CLA
            ```

            ### What This Means
            - You wrote the code yourself (or have permission)
            - You're granting us license to use it in Cortex Linux
            - You're not giving up your own rights to your code

            **Questions?** Open an issue or ask in discussions.

            ---
            *This is a one-time signature. Future PRs will pass automatically.*

          custom-pr-sign-comment: |
            ## CLA Signed Successfully

            Thank you for signing the Cortex Linux Contributor License Agreement!

            Your signature has been recorded. All your future contributions will be automatically approved.

            Welcome to the Cortex Linux contributor community!

          custom-allsigned-prcomment: |
            ## All Contributors Have Signed the CLA

            This PR is clear for review and merge from a licensing perspective.
